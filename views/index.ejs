<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" type="text/css" href="stylesheets/index.css" />
        <title>Events</title>
    </head>
    <body>
        <header id="heading" class="container-fluid">
            <h1>Events & News</h1>
            <h6>Learn, Compete & Grow</h6>
        </header>
        <main class="container main">
            <section>
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container-fluid">
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a
                                class="nav-link <%= event_category == 'ALL_EVENTS' ? 'active' : '' %> "
                                href="/?event_category=ALL_EVENTS&event_sub_category=Upcoming&tag_list=&offset="
                                >All Events
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link <%= event_category == 'WEBINAR' ? 'active' : '' %>"
                                href="/?event_category=WEBINAR&event_sub_category=Upcoming&tag_list=&offset="
                                >Webinars</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link <%= event_category == 'CODING_EVENT' ? 'active' : '' %>"
                                href="/?event_category=CODING_EVENT&event_sub_category=Upcoming&tag_list=&offset="
                                >Coding Events</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link <%= event_category == 'BOOTCAMP_EVENT' ? 'active' : '' %>"
                                href="/?event_category=BOOTCAMP_EVENT&event_sub_category=Upcoming&tag_list=&offset="
                                >Bootcamp Events</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link <%= event_category == 'WORKSHOP' ? 'active' : '' %>"
                                href="/?event_category=WORKSHOP&event_sub_category=Upcoming&tag_list=&offset="
                                >WorkShop</a
                            >
                        </li>
                    </ul>
                  </div>
                </div>
              </nav>
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;"">
                <div class="container-fluid">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a
                                class="nav-link <%= event_sub_category == 'Upcoming' ? 'active': '' %>"
                                href="/?event_category=<%= event_category %>&event_sub_category=Upcoming&tag_list=&offset="
                                >Upcoming
                            </a>
                        </li>
                        <li class="nav-item <%= event_sub_category == 'Archived' ? 'active': '' %>">
                            <a
                                class="nav-link"
                                href="/?event_category=<%= event_category %>&event_sub_category=Archived&tag_list=&offset="
                                >Archived</a
                            >
                        </li>
                        <li class="nav-item <%= event_sub_category === 'All Time Favorites' ? 'active': '' %>">
                            <a
                                class="nav-link"
                                href="/?event_category=<%= event_category %>&event_sub_category=All Time Favorites&tag_list=&offset="
                                >All Time Favorites</a
                            >
                        </li>
                    </ul>
                </div>
            </nav>
        </section>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-9 d-flex flex-wrap">
                    <% for(let event of events){ %>
                        <a class="card-link" href="#">
                            <div class="card" style="width: 20rem;">
                                <img src="<%= event.cover_picture %> " class="card-img-top" alt="...">
                                <div class="card-body">
                                <h5 class="card-title"><%= event.name %> </h5> 
                                <% if(event_sub_category == 'Upcoming'){ %>    
                                    <p class="time">Registration open until <%= new Date(event.registration_end_time * 1000) %> </p>
                                <% } %> 
                                <p class="card-text"><%= event.short_desc.substr(0,100) + '...' %> </p>
                                <% for(let tag of event.card_tags){ %>
                                    <div class="tag"><%= tag %> </div>
                                <% } %> 
                                </div>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item"><%= event.seats_filled%> users registered</li>  
                                  </ul>
                            </div>
                        </a>
                    <%} %> 
                </div>
                <div class="col-md-3">
                    <h3>Tags</h3>
                    <% for(let tag of tags){ %>
                        <a class="card-link" href="/?event_category=<%= event_category %>&event_sub_category=<%= event_sub_category %>&tag_list=<%= tag %>&offset=">
                        <div class="tag"><%= tag %> </div>
                    </a>
                    <% } %> 
                </div>
            </div>
        </div>
        </main>
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
            integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
            crossorigin="anonymous"
        ></script>
    </body>
</html>
